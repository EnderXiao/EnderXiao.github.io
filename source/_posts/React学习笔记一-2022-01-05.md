---
title: React学习笔记一
date: 2022-01-05 10:40:48
categories:
  - - 研究生
    - 打工
    - React
  - - 前端
tags:
  - 打工
  - 前端框架
  - React
  - life
headimg:
  'https://z3.ax1x.com/2021/08/05/fego40.png'
mathjax: true

---

前端框架React学习笔记

<!-- more -->

## 前言

上研究生后老师让直接去实习，实习单位使用React + React Native进行安卓混合开发。于是先学习一下React

## React概述

React是一个构建用户见面的JS库

### React特点

1. 声明式

   只需要描述UI（HTML）看起来是啥样，即描述结构，React负责渲染UI以及在数据变化时更新UI

2. 基于组件

   - 用于表示页面中的部分内容
   - 通过组合、复用多个组件，就能实现完整的页面功能

3. 学习一次随处使用

   - 使用React开发Web应用

   - 使用React-native开发移动端应用
   - React 360开发VR应用

### React 安装

```shell
npm i react react-dom
```

- react包是核心，提供创建元素，组件的功能
- react-dom包提供DOM相关功能

### React初见

1. 选择一个目录

2. 创建index.html

3. 在该目录下安装react包

   ```shell
   npm i react react-dom
   ```

   

```html
<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-1.0 ">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>react</title>
</head>

<body>

    <div id="root"></div>
    <!-- 引入reactjs -->
    <script src="./node_modules/react/umd/react.development.js"></script>
    <script src="./node_modules/react-dom/umd/react-dom.development.js"></script>
    <script>
        // 创建React元素
        // 参数：
        //     1. 元素名称
        //     2. 元素属性
        //     3. 第三个及其之后的参数：元素子节点
        const title = React.createElement('h1', null, "Hello React")

        // 渲染React元素
        // 参数：
        //     1. 要渲染的react元素
        //     2. 挂载点，一个DOM对象，指定渲染位置
        ReactDOM.render(title, document.getElementById("root"))
    </script>
</body>

</html>
```

### React脚手架

#### 脚手架的意义

1. 脚手架是开发现代Web应用的必备
2. 充分利用Webpack、Babel、ESLint等工具辅助项目开发
3. 零配置，无需手动配置繁琐的工具即可使用
4. 关注业务二部是工具配置

#### 使用脚手架初始化项目

```shell
npx create-react-app my-app
```

使用

```shell
npm start
```

启动项目

#### npx 的意义

原来使用npm上下载的包时，如果想在任意地方使用，需要全局安装这个包，但npx之后无需全局安装，即可使用。

#### 脚手架中导入React包

由于React基于Webpack，因此导入时可直接使用ES6中的模块化语法进行导入：

```js
import React from 'react'
import ReactDOM from 'react-dom' //使用react制作web应用时导入该渲染组件
```

## JSX

### JSX基本使用

即JavaScript XML，表示在JS中写XML格式的代码

优点：

1. 声明式语法更直观，与HTML结构相同，降低了学习成本、提升开发效率

#### 使用步骤

使用JSX语法创建react元素

```react
const title = <h1>Hello JSX</h1>
```

使用reactDOM.render渲染react元素到页面

```react
ReactDOM.render(title, root)
```

#### JSX原理

react脚手架中配置了babel，JSX会经过babel编译为标准的JS语法。

编译JSX语法的包为@babel/preset-react

#### 注意事项

1. React元素的属性名采用驼峰命名法
2. 使用JSX为标签设置属性时，应修改为驼峰命名：
   1. class属性 -> className
   2. for -> htmlFor
   3. tabindex -> tabIndex
3. 没有子节点的React元素，可以使用但标签`<span />`结束
4. 推荐使用小括号包裹JSX，从而避免JS中的自动插入分号陷阱

### JSX中嵌入JS表达式

语法：

```react
const name = 'Jack'
const dv = (
	<div>你好，我叫：{name} </div>
)
```

### JSX条件渲染

根据条件渲染特定的JSX结构

```react
const isLoading = false
cont loadData = () => {
	if (isLoading) {
		return <div>loading...</div>
	}
	
	return <div>数据加载完成，此处显示加载后的数据</div>
}

const title = (
	<h1>
		条件渲染：
		{loadData()}
	</h1>
)

ReactDOM.render(title, document.getElementById('root'))
```

此外还可以使用三目运算符和逻辑与运算符

```react
const isLoading = false
cont loadData = () => {
    return isLoading && (<div>loading...</div>)
}

const title = (
	<h1>
		条件渲染：
		{loadData()}
	</h1>
)

ReactDOM.render(title, document.getElementById('root'))
```

### JSX列表渲染

使用数组的map()方法

需要注意的是渲染列表时应该添加key属性，key属性的值要保证唯一

通过便利创建什么元素，就要把key通过遍历加上。

尽量避免使用索引号作为key

```react
import React from 'react'
import ReactDOM from 'react-dom'

const songs = [
    {id: 1, name: '111'},
    {id: 2, name: '222'},
    {id: 3, name: '333'},
]

const title = (
	<ul>
        {songs.map(item = > <li key={item.id}>{item.name}</li>)}
	</ul>
)

ReactDOM.render(title, document.getElementById('root'))
```

### JSX样式处理

两种方式：

1. 行内样式——style
2. 类名——className

使用样式时需要引入

```react
import React from 'react'
import ReactDOM from 'react-dom'

//引入css
import './css/index.css'

const list = (
    <h1 className="title" style={{ clolr: 'red', backgroundColor: 'skyblue'}}>
)

ReactDOM.render(list, document.getElementById('root'))
```



## Angular框架

### MVVM

> **MVVM是MVC的增强版，实质上和MVC没有本质区别，只是代码的位置变动而已**。
>
> ——[MVVM是什么 - 简书 (jianshu.com)](https://www.jianshu.com/p/6aeeecd64dcf)

#### MVC

之前学习过MVC框架，对于MVC框架，可以简述为一下三个方面：

1. Model：数据模型，用来存储数据
2. View：视图界面，用来展示UI界面和响应用户交互
3. Controller：控制器(大管家角色)，监听模型数据的改变和控制视图行为、处理用户交互

#### MVC的缺点

在开发过程中，由于需求的变更或添加，项目的复杂度越来越高，代码量越来越大，此时我们会发现MVC维护起来有些吃力，首先被人吐槽的最多的就是MVC的简写变成了Massive-View-Controller（意为沉重的Controller）

#### MVVM的改进

由于Controller主要用来处理各种逻辑和数据转化，复杂业务逻辑界面的Controller非常庞大，维护困难，所以有人想到**把Controller的数据和逻辑处理部分从中抽离出来，用一个专门的对象去管理，这个对象就是ViewModel，是Model和Controller之间的一座桥梁**。当人们去尝试这种方式时，发现Controller中的代码变得非常少，变得易于测试和维护，只需要**Controller和ViewModel做数据绑定**即可，这也就催生了MVVM的热潮。

因此，MVVM包含以下四个组件：

1. View
2. View Controller
3. View Model
4. Model

#### MVVM的优缺点

##### 优点

1. Controller清晰简洁： ViewModel分离了大部分Controller代码，更加清晰和容易维护。
2. 方便测试：开发中大部分Bug来至于逻辑处理，由于ViewModel分离了许多逻辑，可以对ViewModel构造单元测试。
3. 开发解耦(举两个例子)：
   1.  一人负责逻辑实现、另一人负责UI实现；
   2.  敏捷开发时，会发经常发不是等后端做好了接口我们再去开发，不过在没有接口的情况下通常我们可以把Controller和View完成。

##### 缺点

1. 看起来代码会比MVC多点
2. 需要对每个Controller实现绑定，如果处理不好，反而会有一种“画虎不成反类犬”的感觉

#### MVVM框架组成

1. 数据绑定
2. 指令系统
3. 路由和导航
4. 状态保持
5. 第三方组件库

### Angular概述

由Google开发的MVVM框架，官网：[Angular](https://angular.cn/)

#### 环境搭建

##### nodeJS

nodeJS官网安装

##### cnpm

```shell
npm install -g cnpm --registry==https://registry.npm.taobao.org
```

使用淘宝镜像

##### angular-client

```shell
npm isntall -g @angular/cli
# 或者使用cnpm安装
```

##### 验证安装

```shell
ng v# 验证安装
```

#### Angular创建项目

```shell
ng new helloWorld# ng new 项目名# 可以使用如下命令跳过下载依赖的过程ng new helloWorld --skip-install
```

通过选择路由及CSS预处理器创建项目

使用cnpm/npm安装依赖

```shell
npm install
```

使用

```shell
ng serve --open	
```

启动项目

为VScode安装Angular snippets组件

## Angular项目结构

目录结构：

```
--my-app	|__ [.angular] angular框架相关依赖	|__ [node_modules] 第三方模块（依赖）文件	|__ [src] 项目文件		|__ [app] 组件，及app.modules.ts定义模板		|__ [assets] 静态资源		|__ [enviroments] 为目标环境准备的文件			|__ index.html 主页面			|__ main.ts 应用主要入口			|__ polyfills.ts 填充库，把不同点进行标准化，例如socket.io			|__ styles.css 全局样式			|__ test.ts 单元测试入口			|__ tsconfig.app.json			|__ tsconfig.spec.json TypeScript编译器配置文件	|__ .browserslistrc angular支持浏览器的配置文件	|__ angular.json angular配置文件	|__ package.json npm配置文件	|__ tsconfig.json typeScript编译器配置文件	|__ karma.conf.js Karma单元测试配置	|__ .editorconfig 编辑器配置文件
```

#### 模块

先来看一眼跟模块的代码：

```typescript
/*该文件是Angular根模块， 告诉Angular如何组装应用 *//*Angular核心模块 */import { NgModule } from '@angular/core';/*浏览器解析模块 */import { BrowserModule } from '@angular/platform-browser';import { AppRoutingModule } from './app-routing.module';/*根组件 */import { AppComponent } from './app.component';import { HelloworldComponent } from './helloworld/helloworld.component';/*装饰器，接受一个元数据对象，告诉Angular如何编译和启动应用 */@NgModule({  declarations: [ /*配置当前项目运行的组件 */    AppComponent,    HelloworldComponent  ],  imports: [  /*配置当前模块运行依赖的其他模块 */    BrowserModule,    AppRoutingModule  ],  providers: [],  /*配置项目所需的服务 */  bootstrap: [AppComponent] /*（启动时默认加载的组件）指定应用的主视图（称为根组件）通过引导App module来启动应用 。*/})//根模块不需要导出任何东西，因为不需要被其他组件导入。export class AppModule { }
```



